{"version":3,"sources":["webpack:///webpack/bootstrap 9ff496cf43956b96b2b8","webpack:///external \"immutable\"","webpack:///external \"chai\"","webpack:///./src/store/db.js","webpack:///external \"pg\"","webpack:///external \"immutablediff\"","webpack:///./temp/specs_entry.js","webpack:///./src/hello_world/hello_world.spec.js","webpack:///./src/hello_world/hello_world.js","webpack:///./config/env_test.json","webpack:///./src/tests/actions.spec.js","webpack:///./scripts/getModelInfo.js","webpack:///./src/tests/migrationScript.spec.js","webpack:///./scripts/migrationScript.js","webpack:///external \"shelljs\"","webpack:///external \"path\"","webpack:///./src/store/index.js","webpack:///external \"redux\"","webpack:///external \"redux-immutable\"","webpack:///external \"redux-logger\"","webpack:///external \"redux-thunk\"","webpack:///./src/store/dbList.js","webpack:///./scripts/getDatabases.js","webpack:///./src/store/targetDb.js","webpack:///./src/store/dbUrl.js","webpack:///./e2e/utils.js","webpack:///external \"electron\"","webpack:///external \"spectron\""],"names":["INIT_DB","initDB","db","type","fetchDb","dbName","dispatch","then","catch","console","error","initialDB","state","action","describe","it","to","equal","name","description","a","b","eql","greet","bye","key","attributes","allowNull","expectedAction","actualAction","deep","getModelInfo","selectedDbName","Client","require","portSetting","postgresUrl","client","connect","res","query","modelNames","rows","map","row","tablename","promisedDB","buildModelObjects","Promise","all","model","idx","modelObject","modelAttributeList","buildModelAttributeList","dataTypeMapping","attribute","ordinal_position","column_name","data_type","op","changePath","be","an","instanceOf","Error","changes","log","shell","path","diff","fromJS","store","directoryPath","regex","modelKey","attributeKey","config","execPath","which","createConfigFiles","modelsPath","configPath","touch","echo","mkdir","getMigrationAction","includes","getListOfChanges","targetDb","changeMap","value","get","match","modelName","undefined","attributeName","getIn","set","getDownAction","upAction","generateMigrationContent","listOfChanges","upMigration","downMigration","migrationEnding","forEach","change","downAction","upQuery","downQuery","upQueryWrapper","downQueryWrapper","runMigration","shouldGenerateModels","directory","default","getState","dbUrl","replace","resolve","now","Date","migration","cp","exec","code","stdout","stderr","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","reducer","dbList","middleware","collapsed","initialDbList","POPULATE_DB_LIST","populateDbList","fetchDbNames","dbs","err","getDatabases","databases","anon","datname","UPDATE_DB","updateDB","initialState","initialDbUrl","SET_DB_URL","setDbUrl","url","beforeEach","timeout","app","args","startTimeout","waitTimeout","start","afterEach","isRunning","stop","setIn"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;AC7DA,sC;;;;;;ACAA,iC;;;;;;;;;;;;;;;ACAA;;AACA;;;;AACA;AACO,MAAMA,UAAU,SAAhB;;;AAEA,MAAMC,SAAUC,EAAD,KAAS;AAACC,QAAMH,OAAP;AAAgBE,MAAIA;AAApB,CAAT,CAAf,C,CAEP;;;;;AAEO,MAAME,UAAUC,UAAUC,YAAY;AAC3C;AACA,6BAAaD,MAAb,EACGE,IADH,CACQL,MAAMI,SAASL,OAAOC,EAAP,CAAT,CADd,EAEGM,KAFH,CAESC,QAAQC,KAFjB;AAGD,CALM,C,CAOP;;;;AAEA,MAAMC,YAAY,qBAAK,EAAL,CAAlB,C,CAEA;;AAEe,kBAAUC,QAAQD,SAAlB,EAA6BE,MAA7B,EAAqC;AAClD,UAAQA,OAAOV,IAAf;AACE,SAAKH,OAAL;AACE,aAAOa,OAAOX,EAAd;;AACF;AACE,aAAOU,KAAP;AAJJ;AAMD,C;;;;;;AC7BD,+B;;;;;;ACAA,0C;;;;;;;;;ACAA;;AACA;;AACA,wB;;;;;;;;;ACFA;;AACA;;AACA;;;;AAEAE,SAAS,aAAT,EAAwB,MAAM;AAC5BC,KAAG,QAAH,EAAa,MAAM;AACjB,sBAAO,yBAAP,EAAgBC,EAAhB,CAAmBC,KAAnB,CAAyB,cAAzB;AACD,GAFD;AAIAF,KAAG,cAAH,EAAmB,MAAM;AACvB,sBAAO,uBAAP,EAAcC,EAAd,CAAiBC,KAAjB,CAAuB,SAAvB;AACD,GAFD;AAIAF,KAAG,wCAAH,EAA6C,MAAM;AACjD,sBAAO,aAAIG,IAAX,EAAiBF,EAAjB,CAAoBC,KAApB,CAA0B,MAA1B;AACA,sBAAO,aAAIE,WAAX,EAAwBH,EAAxB,CAA2BC,KAA3B,CACE,mDADF;AAGD,GALD;AAOAF,KAAG,4BAAH,EAAiC,MAAM;AACrC,UAAMK,IAAI;AAAEA,SAAG;AAAL,KAAV;AACA,UAAMC,sBAASD,CAAT;AAAYC,SAAG;AAAf,MAAN;AACA,sBAAOA,CAAP,EAAUL,EAAV,CAAaM,GAAb,CAAiB;AAAEF,SAAG,CAAL;AAAQC,SAAG;AAAX,KAAjB;AACD,GAJD;AAKD,CArBD,E;;;;;;;;;;;;;;ACJO,MAAME,QAAQ,MAAM;AACzB,SAAO,gBAAP;AACD,CAFM;;;;AAIA,MAAMC,MAAM,MAAM;AACvB,SAAO,SAAP;AACD,CAFM;;;;;;;;ACJP,kBAAkB,gF;;;;;;;;;ACAlB;;AACA;;AACA;;AAEAV,SAAS,SAAT,EAAoB,MAAM;AACxBC,KAAG,qCAAH,EAA0C,MAAM;AAC9C,UAAMb,KAAK,uBACT,CACE;AAAE;AACAuB,WAAK,CADP;AAEEP,YAAM,OAFR;AAGEQ,kBAAY,CACV;AAAE;AACAD,aAAK,CADP;AAEEP,cAAM,MAFR;AAGEf,cAAM,QAHR;AAIEwB,mBAAW;AAJb,OADU,EAOV;AACEF,aAAK,CADP;AAEEP,cAAM,OAFR;AAGEf,cAAM,QAHR;AAIEwB,mBAAW;AAJb,OAPU;AAHd,KADF,CADS,CAAX;AAsBA,UAAMC,iBAAiB;AACrBzB,uBADqB;AAErBD,UAAIA;AAFiB,KAAvB;AAIA,UAAM2B,eAAe,gBAAO3B,EAAP,CAArB;AACA,sBAAO0B,cAAP,EAAuBZ,EAAvB,CAA0Bc,IAA1B,CAA+Bb,KAA/B,CAAqCY,YAArC;AACD,GA7BD;AA8BD,CA/BD,E;;;;;;;;;;;;;;ACJA;;AAEA,eAAeE,YAAf,CAA4BC,cAA5B,EAA4C;AAC1C,QAAM;AAAEC;AAAF,MAAa,mBAAAC,CAAQ,CAAR,CAAnB,CAD0C,CAG1C;;;AACA,QAAMC,cAAc,4BAApB;AACA,QAAMC,cAAcD,cAAcH,cAAlC;AACA,QAAMK,SAAS,IAAIJ,MAAJ,CAAWG,WAAX,CAAf;AAEA,QAAMC,OAAOC,OAAP,EAAN,CAR0C,CAU1C;;AACA,QAAMC,MAAM,MAAMF,OAAOG,KAAP,CAAc;;8DAAd,CAAlB;AAIA,QAAMC,aAAaF,IAAIG,IAAJ,CAASC,GAAT,CAAaC,OAAOA,IAAIC,SAAxB,CAAnB;AAEA,QAAMC,aAAaC,kBAAkBN,UAAlB,EAA8BJ,MAA9B,CAAnB;AAEA,SAAOW,QAAQC,GAAR,CAAYH,UAAZ,EAAwBvC,IAAxB,CAA6BL,MAAM,uBAAOA,EAAP,CAAnC,CAAP;AACD;;AAED,SAAS6C,iBAAT,CAA2BN,UAA3B,EAAuCJ,MAAvC,EAA+C;AAC7C,SAAOI,WAAWE,GAAX,CAAe,OAAOO,KAAP,EAAcC,GAAd,KAAsB;AAC1C,UAAMC,cAAc;AAClB3B,WAAK0B,GADa;AAElBjC,YAAMgC,KAFY;AAGlBxB,kBAAY,EAHM,CAMpB;;AANoB,KAApB;AAOA,UAAMA,aAAa,MAAMW,OAAOG,KAAP,CAAc;;iEAEsBU,KAAM,GAF1C,CAAzB;AAIA,UAAMG,qBAAqBC,wBAAwB5B,UAAxB,CAA3B;AACA0B,gBAAY1B,UAAZ,GAAyB2B,kBAAzB;AACA,WAAOD,WAAP;AACD,GAfM,CAAP;AAgBD;;AAED,SAASE,uBAAT,CAAiC5B,UAAjC,EAA6C;AAC3C,QAAM6B,kBAAkB;AAAE,yBAAqB,QAAvB;AACE,eAAW,SADb;AAEE,gCAA4B,MAF9B;AAGE,eAAW,SAHb;AAIE,YAAQ,MAJV;AAKE,wBAAoB;AALtB,GAAxB;AAQA,SAAO7B,WAAWgB,IAAX,CAAgBC,GAAhB,CAAoBa,aAAa;AACtC,WAAO;AACL/B,WAAK+B,UAAUC,gBADV;AAELvC,YAAMsC,UAAUE,WAFX;AAGLvD,YAAMoD,gBAAgBC,UAAUG,SAA1B,KAAwCH,UAAUG;AAHnD,KAAP;AAKD,GANM,CAAP;AAOD;;eAEc5B,Y;;;;;;;;;;AC7Df;;AACA;;AACA;;AACA;;AACA;;;;AACA;;;;;;;;;;;;;;;;;;;;;;;AAwBAjB,SAAS,sBAAT,EAAiC,MAAM;AAErCA,WAAS,mCAAT,EAA8C,MAAK;AACjDC,OAAG,8BAAH,EAAmC,MAAM;AACzC,UAAI6C,KAAK,KAAT;AAAA,UACIC,aAAa,iBADjB;AAGE,wBAAO,yCAAmBD,EAAnB,EAAuBC,UAAvB,CAAP,EAA2C7C,EAA3C,CAA8CC,KAA9C,CAAoD,WAApD;AACD,KALD,GAMAF,GAAG,uCAAH,EAA4C,MAAM;AAChD,UAAI6C,KAAK,QAAT;AAAA,UACIC,aAAa,iBADjB;AAGA,wBAAO,yCAAmBD,EAAnB,EAAuBC,UAAvB,CAAP,EAA2C7C,EAA3C,CAA8CC,KAA9C,CAAoD,cAApD;AACD,KALD,CANA,EAYAF,GAAG,oBAAH,EAAyB,MAAM;AAC7B,UAAI6C,KAAI,WAAR;AAAA,UACIC,aAAa,iBADjB;AAAA,UAEInD,QAAS,wCAAuCkD,EAAG,aAAYC,UAAW,EAF9E;AAIA,wBAAO,yCAAmBD,EAAnB,EAAuBC,UAAvB,CAAP,EAA2C7C,EAA3C,CAA8C8C,EAA9C,CAAiDC,EAAjD,CAAoDC,UAApD,CAA+DC,KAA/D;AACD,KAND,CAZA;AAmBD,GApBD,GAsBAnD,SAAS,iCAAT,EAA4C,MAAM;AAChDC,OAAG,6BAAH,EAAkC,MAAM;AACtC,YAAMmD,UAAU,uDAAhB;AACAzD,cAAQ0D,GAAR;AACA1D,cAAQ0D,GAAR,CAAY,WAAZ;AACD,KAJD;AAKD,GAND,CAtBA;AA6BD,CA/BD,E;;;;;;;;;;;;;;AC7BA,MAAMC,QAAQ,mBAAAlC,CAAQ,EAAR,CAAd;;AACA,MAAMmC,OAAO,mBAAAnC,CAAQ,EAAR,CAAb;;AACA,MAAMoC,OAAO,mBAAApC,CAAQ,CAAR,CAAb;;AACA,MAAM;AAACqC;AAAD,IAAW,mBAAArC,CAAQ,CAAR,CAAjB;;AACA,MAAMsC,QAAQ,mBAAAtC,CAAQ,EAAR,CAAd;;AACA,MAAMuC,gBAAgB,4CAAtB,C,CAEA;;AACO,MAAMC,QAAQ;AACLC,YAAU,SADL;AAELC,gBAAc,mBAFT,CAIrB;;AAJqB,CAAd;;AAKPR,MAAMS,MAAN,CAAaC,QAAb,GAAwBV,MAAMW,KAAN,CAAY,MAAZ,CAAxB;AAGA;;AACA,MAAMC,oBAAoB,CAACC,UAAD,EAAaC,UAAb,EAAyB7E,MAAzB,KAAoC;AAC5D;AACA,QAAMwE,SAAU;;qBAEGxE,MAAO;;;;IAF1B,CAF4D,CAS5D;;AACA+D,QAAMe,KAAN,CAAa,cAAb;AACAf,QAAMgB,IAAN,CAAY,8DAA6DF,UAAW,yBAAwBD,UAAW,MAAvH,EAA8HjE,EAA9H,CAAkI,cAAlI,EAX4D,CAY5D;;AACAoD,QAAMgB,IAAN,CAAWP,MAAX,EAAmB7D,EAAnB,CAAuB,oBAAvB,EAb4D,CAc5D;;AACAoD,QAAMiB,KAAN,CAAa,YAAb;AACD,CAhBD;;AAkBO,MAAMC,qBAAqB,CAAC1B,EAAD,EAAKC,UAAL,KAAoB;AACpD,MAAIA,WAAW0B,QAAX,CAAoB,YAApB,CAAJ,EAAuC;AACrC;AACA,YAAQ3B,EAAR;AACE,WAAK,KAAL;AACE,eAAO,WAAP;;AACF,WAAK,QAAL;AACE,eAAO,cAAP;;AACF,WAAK,SAAL;AACE,eAAOC,WAAW0B,QAAX,CAAoB,MAApB,IAA8B,cAA9B,GAA+C,cAAtD;;AACF;AACE,eAAO,IAAItB,KAAJ,CAAW,wCAAuCL,EAAG,aAAYC,UAAW,EAA5E,CAAP;AARJ;AAUD,GAZD,MAYO;AACL;AACA,YAAQD,EAAR;AACE,WAAK,KAAL;AACE,eAAO,aAAP;;AACF,WAAK,QAAL;AACE,eAAO,WAAP;;AACF,WAAK,SAAL;AACE,eAAO,aAAP;;AACF;AACE,cAAM,IAAIK,KAAJ,CAAW,wCAAuCL,EAAG,aAAYC,UAAW,EAA5E,CAAN;AARJ;AAUD;AACF,CA1BM;;;;AA4BA,MAAM2B,mBAAmB,CAACtF,EAAD,EAAKuF,QAAL,KAAkB;AAChD,SAAOnB,KAAKpE,EAAL,EAASuF,QAAT,EAAmB9C,GAAnB,CAAuB+C,aAAa;AAEzC;AACA;AACA;AACA;AACA;AACA;AAEA,QAAIC,KAAJ,CATyC,CAS/B;;AACV,UAAM/B,KAAK8B,UAAUE,GAAV,CAAc,IAAd,CAAX;AACA,UAAM/B,aAAa6B,UAAUE,GAAV,CAAc,MAAd,CAAnB;AACA,UAAMjB,WAAWe,UAAUE,GAAV,CAAc,MAAd,EAAsBC,KAAtB,CAA4BnB,MAAMC,QAAlC,EAA4C,CAA5C,CAAjB;AACA,QAAImB,SAAJ;;AACA,QAAIlC,OAAO,QAAP,IAAmBA,OAAO,SAA9B,EAAyC;AACvCkC,kBAAY5F,GAAG0F,GAAH,CAAOjB,QAAP,EAAiBiB,GAAjB,CAAqB,MAArB,CAAZ;AACD,KAFD,MAGK;AACHE,kBAAYL,SAASG,GAAT,CAAajB,QAAb,EAAuBiB,GAAvB,CAA2B,MAA3B,CAAZ;AACD;;AACD,UAAMhB,eAAec,UAAUE,GAAV,CAAc,MAAd,EAAsBC,KAAtB,CAA4BnB,MAAME,YAAlC,IAAkDc,UAAUE,GAAV,CAAc,MAAd,EAAsBC,KAAtB,CAA4BnB,MAAME,YAAlC,EAAgD,CAAhD,CAAlD,GAAuGmB,SAA5H;AACA,UAAMC,gBAAgB9F,GAAG+F,KAAH,CAAS,CAACtB,QAAD,EAAW,YAAX,EAAyBC,YAAzB,EAAuC,MAAvC,CAAT,CAAtB;AACA,WAAOc,UACJQ,GADI,CACA,OADA,EACSJ,SADT,EAEJI,GAFI,CAEA,QAFA,EAEUZ,mBAAmB1B,EAAnB,EAAuBC,UAAvB,CAFV,EAGJqC,GAHI,CAGA,OAHA,EAGSR,UAAUE,GAAV,CAAc,OAAd,KAA0BrB,OAAO;AAAErD,YAAM8E;AAAR,KAAP,CAHnC,CAAP;AAID,GA1BM,CAAP;AA2BD,CA5BM;;;;AA8BP,MAAMG,gBAAiBC,QAAD,IAAc;AAClC,UAAQA,QAAR;AACE,SAAK,WAAL;AACE,aAAO,cAAP;;AACF,SAAK,cAAL;AACE,aAAO,WAAP;;AACF,SAAK,cAAL;AACE,aAAO,cAAP;;AACF,SAAK,cAAL;AACE,aAAO,cAAP;;AACF,SAAK,aAAL;AACE,aAAO,WAAP;;AACF,SAAK,WAAL;AACE,aAAO,aAAP;;AACF,SAAK,aAAL;AACE,aAAO,aAAP;;AACF;AACE,YAAM,IAAInC,KAAJ,CAAU,mEAAmEmC,QAA7E,CAAN;AAhBJ;AAkBD,CAnBD;;AAqBA,MAAMC,2BAA2BC,iBAAiB;AAChD,MAAIC,cAAe;;YAAnB;AAGA,MAAIC,gBAAiB;;YAArB;AAGA,MAAIC,kBAAmB;EAAvB;AAGAH,gBAAcI,OAAd,CAAsB,CAACC,MAAD,EAASxD,GAAT,KAAiB;AACrC,UAAMD,QAAQyD,OAAOf,GAAP,CAAW,OAAX,CAAd;AACA,UAAM/E,SAAS8F,OAAOf,GAAP,CAAW,QAAX,CAAf;AACA,UAAMgB,aAAaT,cAActF,MAAd,CAAnB;AACA,UAAMV,OAAOwG,OAAOf,GAAP,CAAW,OAAX,EAAoBA,GAApB,CAAwB,MAAxB,CAAb;AACA,UAAM1E,OAAOyF,OAAOf,GAAP,CAAW,OAAX,EAAoBA,GAApB,CAAwB,MAAxB,CAAb;AACA,QAAIiB,OAAJ;AACA,QAAIC,SAAJ;;AACA,QAAIjG,WAAW,aAAX,IAA4BA,WAAW,WAA3C,EAAwD;AACtD;AACAgG,gBAAW,mBAAkBhG,MAAO,OAAMK,IAAK;;;;;;;;;;;;;WAA/C;AAcA4F,kBAAa,mBAAkBF,UAAW,OAAM1F,IAAK,IAArD;AACD,KAjBD,MAiBO;AACL;AACA2F,gBAAW,mBAAkBhG,MAAO,OAAMqC,KAAM,OAAMhC,IAAK,gBAAef,IAAK,GAA/E;AACA2G,kBAAa,mBAAkBF,UAAW,OAAM1D,KAAM,OAAMhC,IAAK,gBAAef,IAAK,GAArF;AACD;;AAED,UAAM4G,iBAAiB5D,QAAQ,CAAR,GAAa,GAAE0D,OAAQ,EAAvB,GAA4B,uBAAsBA,OAAQ,GAAjF;AACA,UAAMG,mBAAmB7D,QAAQ,CAAR,GAAa,GAAE2D,SAAU,EAAzB,GAA8B,uBAAsBA,SAAU,GAAvF,CAhCqC,CAkCrC;;AACAP,mBAAeQ,cAAf,CAnCqC,CAoCrC;;AACAP,qBAAiBQ,gBAAjB;AACF,GAtCA;AAwCA,SAAOT,cAAcC,aAAd,GAA8BC,eAArC;AACD,CAnDD;AAsDA;;AAEA;;;AACA,MAAMQ,eAAe,OAAOC,oBAAP,EAA6BC,SAA7B,KAA2C;AAE9D;AACA,QAAMvG,QAAQ4D,MAAM4C,OAAN,CAAcC,QAAd,EAAd;AACA,QAAMnH,KAAKU,MAAMgF,GAAN,CAAU,IAAV,CAAX;AACA,QAAMH,WAAW7E,MAAMgF,GAAN,CAAU,UAAV,CAAjB;AACA,QAAM0B,QAAQ1G,MAAMgF,GAAN,CAAU,OAAV,CAAd;AACA,QAAMvF,SAASiH,MAAMC,OAAN,CAAc,4BAAd,EAA4C,EAA5C,CAAf;AACAnD,QAAMgB,IAAN,CAAW,oBAAX,EAR8D,CAU9D;;AAEA,QAAMH,aAAaZ,KAAKmD,OAAL,CAAa,QAAb,EAAuB,IAAvB,EAA6B,QAA7B,CAAnB;AACA,QAAMtC,aAAab,KAAKmD,OAAL,CAAa,QAAb,EAAuB,aAAvB,CAAnB;AACA,QAAMC,MAAMC,KAAKD,GAAL,EAAZ,CAd8D,CAgB9D;;AACAzC,oBAAkBC,UAAlB,EAA8BC,UAA9B,EAA0C7E,MAA1C,EAjB8D,CAoB9D;AAGA;AACA;;AACA,QAAMiG,gBAAgBd,iBAAiBtF,EAAjB,EAAqBuF,QAArB,CAAtB,CAzB8D,CA0B5D;AAGF;AACA;;AACA,QAAMkC,YAAYtB,yBAAyBC,aAAzB,CAAlB,CA/B8D,CAiC9D;;AACAlC,QAAMgB,IAAN,CAAY,kCAAiCuC,SAAU,EAAvD,EAA0D3G,EAA1D,CAA8D,cAAayG,GAAI,KAA/E,EAlC8D,CAoC9D;;AACAN,eAAa/C,MAAMwD,EAAN,CAAS,IAAT,EAAe,cAAf,EAAgC,GAAET,SAAU,aAA5C,CAAb,CArC8D,CAuC9D;AACA;;AACA/C,QAAMyD,IAAN,CAAY,wCAAZ,EAAqD,CAACC,IAAD,EAAOC,MAAP,EAAeC,MAAf,KAA0B;AAC7EvH,YAAQ0D,GAAR,CAAY4D,MAAZ;AACAtH,YAAQ0D,GAAR,CAAY6D,MAAZ;AACAd,4BAAwB9C,MAAMyD,IAAN,CAAY,qDAAoDxH,MAAO,6BAAvE,CAAxB,CAH6E,CAI3E;;AACF8G,iBAAa/C,MAAMwD,EAAN,CAAS,IAAT,EAAe,UAAf,EAA4B,GAAET,SAAU,SAAxC,CAAb;AACD,GAND,EAzC8D,CAgD9D;AACA;AACA;AACA;AACA;AACA;AACD,CAtDD;;eAwDeF,Y;;;;;;;ACnOf,oC;;;;;;ACAA,iC;;;;;;;;;;;;;;ACAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;AAEA,MAAMgB,mBAAmBC,OAAOC,oCAAP,kBAAzB;AAEA,MAAMC,UAAU,qCAAgB;AAAClI,iBAAD;AAAKmI,yBAAL;AAAa5C,6BAAb;AAAuB6B;AAAvB,CAAhB,CAAhB;AACA,MAAMgB,aAAa,iDAEjB,+BAAa;AAACC,aAAW;AAAZ,CAAb,CAFiB,CAAnB;AAIA,MAAM/D,QAAQ,wBAAY4D,OAAZ,EAAqBH,iBAAiBK,UAAjB,CAArB,CAAd;eAEe9D,K;;;;;;;AClBf,kC;;;;;;ACAA,4C;;;;;;ACAA,yC;;;;;;ACAA,wC;;;;;;;;;;;;;;;ACAA;;AACA;;;;AAEA,MAAMgE,gBAAgB,qBAAK,CAAC,SAAD,CAAL,CAAtB,C,CAEA;;AAEA,MAAMC,mBAAmB,kBAAzB;;AAEA,MAAMC,iBAAkBL,MAAD,KAAa;AAAClI,QAAMsI,gBAAP;AAAyBJ;AAAzB,CAAb,CAAvB,C,CAEA;;;AAEO,MAAMM,eAAe,MAAMrI,YAAY;AAC5C,+BACGC,IADH,CACQqI,OAAO;AACX,UAAMP,SAAS,qBAAKO,GAAL,CAAf;AACA,WAAOtI,SAASoI,eAAeL,MAAf,CAAT,CAAP;AACD,GAJH,EAKG7H,KALH,CAKSqI,OAAOpI,QAAQC,KAAR,CAAcmI,GAAd,CALhB;AAMD,CAPM,C,CASP;;;;;AAEe,kBAAUjI,QAAQ4H,aAAlB,EAAiC3H,MAAjC,EAAyC;AACtD,UAAQA,OAAOV,IAAf;AACE,SAAKsI,gBAAL;AACE,aAAO5H,OAAOwH,MAAd;;AACF;AACE,aAAOzH,KAAP;AAJJ;AAMD,C;;;;;;;;;;;;;;AC/BD,eAAekI,YAAf,GAA8B;AAC5B,QAAM;AAAE7G;AAAF,MAAa,mBAAAC,CAAQ,CAAR,CAAnB;;AAEA,QAAMG,SAAS,IAAIJ,MAAJ,EAAf;AACA,QAAMI,OAAOC,OAAP,EAAN;AAEA,QAAMC,MAAM,MAAMF,OAAOG,KAAP,CAAa,8DAAb,CAAlB;AAEA,MAAIuG,YAAYxG,IAAIG,IAAJ,CAASC,GAAT,CAAaqG,QAAQ;AACnC,WAAOA,KAAKC,OAAZ;AACD,GAFe,CAAhB;AAIA,SAAOF,SAAP;AACD;;eAEcD,Y;;;;;;;;;;;;;;;;ACff;;AACA;;AAEA;AAEO,MAAMI,YAAY,WAAlB;;;AAEA,MAAMC,WAAY1D,QAAD,KAAe;AAACtF,QAAM+I,SAAP;AAAkBzD;AAAlB,CAAf,CAAjB,C,CAEP;;;;AAEA,MAAM2D,eAAe,qBAAK,EAAL,CAArB;;AAEe,kBAAUxI,QAAQwI,YAAlB,EAAgCvI,MAAhC,EAAwC;AACrD,UAAQA,OAAOV,IAAf;AACE;AACE,aAAOU,OAAOX,EAAd;;AACF,SAAKgJ,SAAL;AACE,aAAOrI,OAAO4E,QAAd;;AACF;AACE,aAAO7E,KAAP;AANJ;AAQD,C;;;;;;;;;;;;;;ACtBD,MAAMyI,eAAe,wBAArB,C,CAEA;;AAEA,MAAMC,aAAa,YAAnB;;AAEO,MAAMC,WAAWC,QAAQ;AAACrJ,QAAMmJ,UAAP;AAAmBE;AAAnB,CAAR,CAAjB,C,CAEP;;;;;AAEe,kBAAU5I,QAAQyI,YAAlB,EAAgCxI,MAAhC,EAAwC;AACrD,UAAQA,OAAOV,IAAf;AACE,SAAKmJ,UAAL;AACE,aAAOzI,OAAO2I,GAAd;;AACF;AACE,aAAO5I,KAAP;AAJJ;AAMD,C;;;;;;;;;;;;;;ACjBD;;AACA;;AACA;;;;AAEA,MAAM6I,aAAa,YAAW;AAC5B,OAAKC,OAAL,CAAa,KAAb;AACA,OAAKC,GAAL,GAAW,0BAAgB;AACzBtF,2BADyB;AAEzBuF,UAAM,CAAC,GAAD,CAFmB;AAGzBC,kBAAc,KAHW;AAIzBC,iBAAa;AAJY,GAAhB,CAAX;AAMA,SAAO,KAAKH,GAAL,CAASI,KAAT,EAAP;AACD,CATD;;AAWA,MAAMC,YAAY,YAAW;AAC3B,OAAKN,OAAL,CAAa,KAAb;;AACA,MAAI,KAAKC,GAAL,IAAY,KAAKA,GAAL,CAASM,SAAT,EAAhB,EAAsC;AACpC,WAAO,KAAKN,GAAL,CAASO,IAAT,EAAP;AACD;;AACD,SAAOnE,SAAP;AACD,CAND;;AAQA,MAAM7F,KAAK,uBACL,CACE;AAAE;AACAuB,OAAK,CADP;AAEEP,QAAM,OAFR;AAGEQ,cAAY,CACV;AAAE;AACAD,SAAK,CADP;AAEEP,UAAM,MAFR;AAGEf,UAAM,QAHR;AAIEwB,eAAW;AAJb,GADU,EAOV;AACEF,SAAK,CADP;AAEEP,UAAM,OAFR;AAGEf,UAAM,QAHR;AAIEwB,eAAW;AAJb,GAPU;AAHd,CADF,CADK,CAAX;AAsBA,MAAM8D,WAAWvF,GAAGiK,KAAH,CAAS,CAAC,GAAD,EAAM,YAAN,EAAoB,GAApB,CAAT,EAAmC,uBAAO;AAACjJ,QAAM,SAAP;AAAkBf,QAAM;AAAxB,CAAP,CAAnC,CAAjB;eAEe;AACbsJ,YADa;AAEbO,WAFa;AAGb9J,IAHa;AAIbuF;AAJa,C;;;;;;;AC/Cf,qC;;;;;;ACAA,qC","file":"specs.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 9ff496cf43956b96b2b8","module.exports = require(\"immutable\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"immutable\"\n// module id = 0\n// module chunks = 0","module.exports = require(\"chai\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"chai\"\n// module id = 1\n// module chunks = 0","import {fromJS, List} from 'immutable'\nimport getModelInfo from '../../scripts/getModelInfo'\n// actions\nexport const INIT_DB = 'INIT_DB'\n\nexport const initDB = (db) => ({type: INIT_DB, db: db})\n\n// thunk\n\nexport const fetchDb = dbName => dispatch => {\n  // fetch all db info\n  getModelInfo(dbName)\n    .then(db => dispatch(initDB(db)))\n    .catch(console.error)\n}\n\n// initial state\n\nconst initialDB = List([])\n\n// reducer\n\nexport default function (state = initialDB, action) {\n  switch (action.type) {\n    case INIT_DB:\n      return action.db\n    default:\n      return state\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/db.js","module.exports = require(\"pg\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"pg\"\n// module id = 3\n// module chunks = 0","module.exports = require(\"immutablediff\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"immutablediff\"\n// module id = 4\n// module chunks = 0","import \"../src/hello_world/hello_world.spec.js\";\nimport \"../src/tests/actions.spec.js\";\nimport \"../src/tests/migrationScript.spec.js\";\n\n\n\n// WEBPACK FOOTER //\n// ./temp/specs_entry.js","import { expect } from \"chai\";\nimport { greet, bye } from \"./hello_world\";\nimport env from \"env\";\n\ndescribe(\"hello world\", () => {\n  it(\"greets\", () => {\n    expect(greet()).to.equal(\"Hello World!\");\n  });\n\n  it(\"says goodbye\", () => {\n    expect(bye()).to.equal(\"See ya!\");\n  });\n\n  it(\"should load test environment variables\", () => {\n    expect(env.name).to.equal(\"test\");\n    expect(env.description).to.equal(\n      \"Add here any environment specific stuff you like.\"\n    );\n  });\n\n  it(\"babel features should work\", () => {\n    const a = { a: 1 };\n    const b = { ...a, b: 2 };\n    expect(b).to.eql({ a: 1, b: 2 });\n  });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/hello_world/hello_world.spec.js","export const greet = () => {\n  return \"Let's Migrate!\";\n};\n\nexport const bye = () => {\n  return \"See ya!\";\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/hello_world/hello_world.js","module.exports = {\"name\":\"test\",\"description\":\"Add here any environment specific stuff you like.\"}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./config/env_test.json\n// module id = 8\n// module chunks = 0","import {initDB, INIT_DB} from '../store/db'\nimport {fromJS} from 'immutable'\nimport {expect} from 'chai'\n\ndescribe('actions', () => {\n  it('should create an action to add a db', () => {\n    const db = fromJS(\n      [\n        { //model object\n          key: 1,\n          name: 'users',\n          attributes: [\n            { // attribute objects\n              key: 1,\n              name: 'name',\n              type: 'string',\n              allowNull: false\n            },\n            {\n              key: 2,\n              name: 'email',\n              type: 'string',\n              allowNull: false\n            }\n          ]\n        }\n      ])\n\n    const expectedAction = {\n      type: INIT_DB,\n      db: db\n    }\n    const actualAction = initDB(db)\n    expect(expectedAction).to.deep.equal(actualAction)\n  })\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/tests/actions.spec.js","import {fromJS} from 'immutable'\n\nasync function getModelInfo(selectedDbName) {\n  const { Client } = require('pg')\n\n  // We don't need username and password as long as password is null\n  const portSetting = 'postgres://localhost:5432/'\n  const postgresUrl = portSetting + selectedDbName\n  const client = new Client(postgresUrl)\n\n  await client.connect()\n\n  // Get all models for the selected database\n  const res = await client.query(`SELECT *\n                                  FROM pg_catalog.pg_tables\n                                  WHERE schemaname = 'public'`)\n\n  const modelNames = res.rows.map(row => row.tablename)\n\n  const promisedDB = buildModelObjects(modelNames, client)\n\n  return Promise.all(promisedDB).then(db => fromJS(db))\n}\n\nfunction buildModelObjects(modelNames, client) {\n  return modelNames.map(async (model, idx) => {\n    const modelObject = {\n      key: idx,\n      name: model,\n      attributes: []\n    }\n\n    // Get each attribute on a model, their index, and data type\n    const attributes = await client.query(`SELECT column_name, ordinal_position, data_type\n                                           FROM information_schema.columns\n                                           WHERE table_name = '${model}'`)\n\n    const modelAttributeList = buildModelAttributeList(attributes)\n    modelObject.attributes = modelAttributeList\n    return modelObject\n  })\n}\n\nfunction buildModelAttributeList(attributes) {\n  const dataTypeMapping = { 'character varying': 'STRING',\n                            'integer': 'INTEGER',\n                            'timestamp with time zone': 'DATE',\n                            'boolean': 'BOOLEAN',\n                            'text': 'TEXT',\n                            'double precision': 'FLOAT'\n                          }\n\n  return attributes.rows.map(attribute => {\n    return {\n      key: attribute.ordinal_position,\n      name: attribute.column_name,\n      type: dataTypeMapping[attribute.data_type] || attribute.data_type\n    }\n  })\n}\n\nexport default getModelInfo\n\n\n\n// WEBPACK FOOTER //\n// ./scripts/getModelInfo.js","import {fromJS} from 'immutable'\nimport diff from 'immutablediff'\nimport {getMigrationAction, getListOfChanges} from '../../scripts/migrationScript'\nimport {expect} from 'chai'\nimport {db, targetDb} from '../../e2e/utils'\n/*const db = fromJS(\n      [\n        { //model object\n          key: 1,\n          name: 'users',\n          attributes: [\n            { // attribute objects\n              key: 1,\n              name: 'name',\n              type: 'string',\n              allowNull: false\n            },\n            {\n              key: 2,\n              name: 'email',\n              type: 'string',\n              allowNull: false\n            }\n          ]\n        }\n      ]),\n      targetDb = db.setIn(['0', 'attributes', '2'], fromJS({name: 'isAdmin', type: 'boolean'})),\n      puppyBowl = 'puppies'*/\n\ndescribe('The migration script', () => {\n\n  describe('has a getMigrationAction function', () =>{\n    it('returns add migration action', () => {\n    let op = 'add',\n        changePath = '/3/attributes/3'\n\n      expect(getMigrationAction(op, changePath)).to.equal('addColumn')\n    }),\n    it('returns removeColumn migration action', () => {\n      let op = 'remove',\n          changePath = '/3/attributes/3'\n\n      expect(getMigrationAction(op, changePath)).to.equal('removeColumn')\n    }),\n    it('throws a new error', () => {\n      let op ='puppyBowl',\n          changePath = '/3/attributes/3',\n          error = `migration type error, with operation ${op} and path ${changePath}`\n\n      expect(getMigrationAction(op, changePath)).to.be.an.instanceOf(Error)\n    })\n  }),\n\n  describe('has a getListOfChanges function', () => {\n    it('returns the list of changes', () => {\n      const changes = diff(db, targetDb)\n      console.log(fromJS)\n      console.log('puppyBowl')\n    })\n  })\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/tests/migrationScript.spec.js","const shell = require('shelljs')\nconst path = require('path')\nconst diff = require('immutablediff')\nconst {fromJS} = require('immutable')\nconst store = require('../src/store')\nconst directoryPath = '/Users/Jon/Documents/fullstack/boilermaker'\n\n// Regexp to get model key inside runmigrations .map\nexport const regex = {\n                modelKey: /\\/(\\d+)/,\n                attributeKey: /attributes\\/(\\d+)/\n              }\n// Required because of bug with electron and shelljs\nshell.config.execPath = shell.which('node')\n\n\n/******************HELPER FUNCTIONS *******************/\nconst createConfigFiles = (modelsPath, configPath, dbName) => {\n  //import config data. We don't need username and password as long as password is null\n  const config = `{\n    \"development\": {\n      \"database\": \"${dbName}\",\n      \"host\": \"127.0.0.1\",\n      \"dialect\": \"postgres\"\n    }\n  }`\n  // setup sequelizerc file\n  shell.touch(`.sequelizerc`)\n  shell.echo(`const path = require('path')\\nmodule.exports = {'config': '${configPath}',\\n  'models-path': '${modelsPath}'\\n}`).to(`.sequelizerc`)\n  // setup config file with db credentials\n  shell.echo(config).to(`config/config.json`)\n  // create migrations folder\n  shell.mkdir(`migrations`)\n}\n\nexport const getMigrationAction = (op, changePath) => {\n  if (changePath.includes('attributes')) {\n    // for column actions\n    switch (op) {\n      case 'add':\n        return 'addColumn'\n      case 'remove':\n        return 'removeColumn'\n      case 'replace':\n        return changePath.includes('name') ? 'renameColumn' : 'changeColumn'\n      default:\n        return new Error(`migration type error, with operation ${op} and path ${changePath}`)\n    }\n  } else {\n    // for table actions\n    switch (op) {\n      case 'add':\n        return 'createTable'\n      case 'remove':\n        return 'dropTable'\n      case 'replace':\n        return 'renameTable'\n      default:\n        throw new Error(`migration type error, with operation ${op} and path ${changePath}`)\n    }\n  }\n}\n\nexport const getListOfChanges = (db, targetDb) => {\n  return diff(db, targetDb).map(changeMap => {\n\n    // add more logic here for different migrations\n    // create table\n    // drop table\n    // rename table\n    // rename column\n    // change column\n\n    let value //figure out logic for adding value for removeAction\n    const op = changeMap.get('op')\n    const changePath = changeMap.get('path')\n    const modelKey = changeMap.get('path').match(regex.modelKey)[1]\n    let modelName\n    if (op === 'remove' || op === 'replace') {\n      modelName = db.get(modelKey).get('name')\n    }\n    else {\n      modelName = targetDb.get(modelKey).get('name')\n    }\n    const attributeKey = changeMap.get('path').match(regex.attributeKey) ? changeMap.get('path').match(regex.attributeKey)[1] : undefined\n    const attributeName = db.getIn([modelKey, 'attributes', attributeKey, 'name'])\n    return changeMap\n      .set('model', modelName)\n      .set('action', getMigrationAction(op, changePath))\n      .set('value', changeMap.get('value') || fromJS({ name: attributeName }))\n  })\n}\n\nconst getDownAction = (upAction) => {\n  switch (upAction) {\n    case 'addColumn':\n      return 'removeColumn'\n    case 'removeColumn':\n      return 'addColumn'\n    case 'renameColumn':\n      return 'renameColumn'\n    case 'changeColumn':\n      return 'changeColumn'\n    case 'createTable':\n      return 'dropTable'\n    case 'dropTable':\n      return 'createTable'\n    case 'renameTable':\n      return 'renameTable'\n    default:\n      throw new Error('Could not generate down Action: Up action was not recognized: ' + upAction)\n  }\n}\n\nconst generateMigrationContent = listOfChanges => {\n  let upMigration = `{\n  up: (queryInterface, Sequelize) => {\n    return `\n  let downMigration = `\\n  },\n  down: (queryInterface, Sequelize) => {\n    return `\n  let migrationEnding = `\\n  }\n}`\n\n  listOfChanges.forEach((change, idx) => {\n    const model = change.get('model')\n    const action = change.get('action')\n    const downAction = getDownAction(action)\n    const type = change.get('value').get('type')\n    const name = change.get('value').get('name')\n    let upQuery\n    let downQuery\n    if (action === 'createTable' || action === 'dropTable') {\n      // adding or dropping tables\n      upQuery = `queryInterface[\"${action}\"](\"${name}\",\n        {\n          id: {\n            type: Sequelize.INTEGER,\n            primaryKey: true,\n            autoIncrement: true\n          },\n          createdAt: {\n            type: Sequelize.DATE\n          },\n          updatedAt: {\n            type: Sequelize.DATE\n          }\n        })`\n      downQuery = `queryInterface[\"${downAction}\"](\"${name}\")`\n    } else {\n      // working on columns\n      upQuery = `queryInterface[\"${action}\"](\"${model}\", \"${name}\", Sequelize.${type})`\n      downQuery = `queryInterface[\"${downAction}\"](\"${model}\", \"${name}\", Sequelize.${type})`\n    }\n\n    const upQueryWrapper = idx === 0 ? `${upQuery}` : `\\n      .then(() => ${upQuery})`\n    const downQueryWrapper = idx === 0 ? `${downQuery}` : `\\n      .then(() => ${downQuery})`\n\n    // This adds a query to the up migration chain\n    upMigration += upQueryWrapper\n    // Add down migration query to the down migration chain\n    downMigration += downQueryWrapper\n })\n\n  return upMigration + downMigration + migrationEnding\n}\n\n\n/******************************************/\n\n/****************MAIN FUNCTION *************/\nconst runMigration = async (shouldGenerateModels, directory) => {\n\n  // get db from store\n  const state = store.default.getState()\n  const db = state.get('db')\n  const targetDb = state.get('targetDb')\n  const dbUrl = state.get('dbUrl')\n  const dbName = dbUrl.replace('postgres://localhost:5432/', '')\n  shell.echo('starting migration')\n\n  //********** setup *********//\n\n  const modelsPath = path.resolve('server', 'db', 'models')\n  const configPath = path.resolve('config', 'config.json')\n  const now = Date.now()\n\n  // create config files and migration folders if they don't exist\n  createConfigFiles(modelsPath, configPath, dbName)\n\n\n  // ******* Find differences to migrate ***********//\n\n\n  // get the diff between the two objects and\n  // add model name and action to diff\n  const listOfChanges = getListOfChanges(db, targetDb)\n    // --> List of changes now has maps (objects) that have model, action, and value\n\n\n  // create migrations file content by looping through List of changes and creating\n  // functions for each. This just gets the first one.\n  const migration = generateMigrationContent(listOfChanges)\n\n  // write migration file\n  shell.echo(`\"use strict\"\\nmodule.exports = ${migration}`).to(`migrations/${now}.js`)\n\n  // copy migration files to user-chosen directory\n  directory && shell.cp('-R', './migrations', `${directory}/migrations`)\n\n  // Run migration\n  //if (shell.exec(`node_modules/.bin/sequelize db:migrate`).code !== 0)\n  shell.exec(`node_modules/.bin/sequelize db:migrate`, (code, stdout, stderr) => {\n    console.log(stdout)\n    console.log(stderr)\n    shouldGenerateModels && shell.exec(`node_modules/.bin/sequelize-auto -o \"./models\" -d ${dbName} -h localhost -e postgres\\n`)\n      // copy model files to user chosen directory\n    directory && shell.cp('-R', './models', `${directory}/models`)\n  })\n  // migrationProcess.stdout.on('data', function(data) {\n  //   console.log('success', data)\n  // })\n  // migrationProcess.stderr.on('error', function(error) {\n  //   shell.exit(error)\n  // })\n}\n\nexport default runMigration\n\n\n\n// WEBPACK FOOTER //\n// ./scripts/migrationScript.js","module.exports = require(\"shelljs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"shelljs\"\n// module id = 13\n// module chunks = 0","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 14\n// module chunks = 0","import {createStore, applyMiddleware, compose} from 'redux'\nimport {combineReducers} from 'redux-immutable'\nimport {createLogger} from 'redux-logger'\nimport thunkMiddleware from 'redux-thunk'\nimport db from './db'\nimport dbList from './dbList'\nimport targetDb from './targetDb'\nimport dbUrl from './dbUrl'\n\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\nconst reducer = combineReducers({db, dbList, targetDb, dbUrl})\nconst middleware = applyMiddleware(\n  thunkMiddleware,\n  createLogger({collapsed: true})\n)\nconst store = createStore(reducer, composeEnhancers(middleware))\n\nexport default store\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/index.js","module.exports = require(\"redux\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"redux\"\n// module id = 16\n// module chunks = 0","module.exports = require(\"redux-immutable\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"redux-immutable\"\n// module id = 17\n// module chunks = 0","module.exports = require(\"redux-logger\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"redux-logger\"\n// module id = 18\n// module chunks = 0","module.exports = require(\"redux-thunk\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"redux-thunk\"\n// module id = 19\n// module chunks = 0","import {List} from 'immutable'\nimport getDatabases from '../../scripts/getDatabases'\n\nconst initialDbList = List(['bananas'])\n\n// action\n\nconst POPULATE_DB_LIST = 'POPULATE_DB_LIST'\n\nconst populateDbList = (dbList) => ({type: POPULATE_DB_LIST, dbList})\n\n// thunk\n\nexport const fetchDbNames = () => dispatch => {\n  getDatabases()\n    .then(dbs => {\n      const dbList = List(dbs)\n      return dispatch(populateDbList(dbList))\n    })\n    .catch(err => console.error(err))\n}\n\n// reducer\n\nexport default function (state = initialDbList, action) {\n  switch (action.type) {\n    case POPULATE_DB_LIST:\n      return action.dbList\n    default:\n      return state\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/dbList.js","async function getDatabases() {\n  const { Client } = require('pg')\n\n  const client = new Client()\n  await client.connect()\n\n  const res = await client.query('SELECT datname FROM pg_database WHERE datistemplate = false;');\n\n  let databases = res.rows.map(anon => {\n    return anon.datname\n  })\n\n  return databases\n}\n\nexport default getDatabases;\n\n\n\n// WEBPACK FOOTER //\n// ./scripts/getDatabases.js","import {List} from 'immutable'\nimport {INIT_DB} from './db'\n\n// actions\n\nexport const UPDATE_DB = 'UPDATE_DB'\n\nexport const updateDB = (targetDb) => ({type: UPDATE_DB, targetDb})\n\n// reducer\n\nconst initialState = List([])\n\nexport default function (state = initialState, action) {\n  switch (action.type) {\n    case INIT_DB:\n      return action.db\n    case UPDATE_DB:\n      return action.targetDb\n    default:\n      return state\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/targetDb.js","const initialDbUrl = '127.0.0.1:5432/migrate'\n\n// action\n\nconst SET_DB_URL = 'SET_DB_URL'\n\nexport const setDbUrl = url => ({type: SET_DB_URL, url})\n\n// reducer\n\nexport default function (state = initialDbUrl, action) {\n  switch (action.type) {\n    case SET_DB_URL:\n      return action.url\n    default:\n      return state\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/dbUrl.js","import electron from \"electron\";\nimport { Application } from \"spectron\";\nimport { fromJS } from \"immutable\";\n\nconst beforeEach = function() {\n  this.timeout(10000);\n  this.app = new Application({\n    path: electron,\n    args: [\".\"],\n    startTimeout: 10000,\n    waitTimeout: 10000\n  });\n  return this.app.start();\n};\n\nconst afterEach = function() {\n  this.timeout(10000);\n  if (this.app && this.app.isRunning()) {\n    return this.app.stop();\n  }\n  return undefined;\n};\n\nconst db = fromJS(\n      [\n        { //model object\n          key: 1,\n          name: 'users',\n          attributes: [\n            { // attribute objects\n              key: 1,\n              name: 'name',\n              type: 'string',\n              allowNull: false\n            },\n            {\n              key: 2,\n              name: 'email',\n              type: 'string',\n              allowNull: false\n            }\n          ]\n        }\n      ])\n\nconst targetDb = db.setIn(['0', 'attributes', '2'], fromJS({name: 'isAdmin', type: 'boolean'}))\n\nexport default {\n  beforeEach,\n  afterEach,\n  db,\n  targetDb\n};\n\n\n\n// WEBPACK FOOTER //\n// ./e2e/utils.js","module.exports = require(\"electron\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"electron\"\n// module id = 25\n// module chunks = 0","module.exports = require(\"spectron\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"spectron\"\n// module id = 26\n// module chunks = 0"],"sourceRoot":""}